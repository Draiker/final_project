<form class="form" #form="ngForm">
  <p-header>
    <div class="ui-helper-clearfix">
      <span class="ui-panel-title">Розклад уроків</span>
    </div>
  </p-header>

  <div class="flex-container">
    <div class="form-control classes">
      <p-dropdown
        name="class"
        [options]="classes"
        [(ngModel)]="selectedClass"
        (onChange)="onClassSelected($event)"
        placeholder="Виберіть клас"
        #class="ngModel"
        required
      >
      </p-dropdown>
      <div [hidden]="class.valid || class.untouched" class="alert alert-danger">
        Виберіть клас
      </div>
    </div>

    <div class="form-group calendar-group-left">
      <p-calendar
        class="form-control"
        [(ngModel)]="schedule.startOfSemester"
        [minDate]="minDateValue"
        [maxDate]="maxDateValue"
        [placeholder]="'Дата початку семестру'"
        [locale]="ua"
        dateFormat="dd.mm.yy"
        [showIcon]="true"
        name="fromDate"
        #fromDate="ngModel"
        required
      ></p-calendar>
      <div
        [hidden]="fromDate.valid || fromDate.untouched"
        class="alert alert-danger"
      >
        Введіть дату
      </div>
    </div>

    <div class="form-group calendar-group-right">
      <p-calendar
        class="form-control"
        [(ngModel)]="schedule.endOfSemester"
        [minDate]="minDateValue"
        [maxDate]="maxDateValue"
        [placeholder]="'Дата закінчення семестру'"
        [locale]="ua"
        dateFormat="dd.mm.yy"
        [showIcon]="true"
        name="toDate"
        #toDate="ngModel"
        required
      ></p-calendar>
      <div
        [hidden]="toDate.valid || toDate.untouched"
        class="alert alert-danger"
      >
        Введіть дату
      </div>
    </div>
  </div>

  <div class="left-panel">
    <p-fieldset class="day" legend="Понеділок">
      <p
        class="subjects"
        *ngFor="let subj of schedule.mondaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.mondaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.mondaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
					[style]="{ width: '190px' }"
					name="mondaySubjects"
        	#mondaySubjects="ngModel"
					
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.mondaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
    <p-fieldset legend="Вівторок">
      <p
        class="subjects"
        *ngFor="let subj of schedule.tuesdaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.tuesdaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.tuesdaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
          [style]="{ width: '190px' }"
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.tuesdaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
    <p-fieldset legend="Середа">
      <p
        class="subjects"
        *ngFor="let subj of schedule.wednesdaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.wednesdaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.wednesdaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
          [style]="{ width: '190px' }"
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.wednesdaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
  </div>

  <div class="right-panel">
    <p-fieldset legend="Четвер">
      <p
        class="subjects"
        *ngFor="let subj of schedule.thursdaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.thursdaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.thursdaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
          [style]="{ width: '190px' }"
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.thursdaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
    <p-fieldset legend="П'ятниця">
      <p
        class="subjects"
        *ngFor="let subj of schedule.fridaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.fridaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.fridaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
          [style]="{ width: '190px' }"
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.fridaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
    <p-fieldset legend="Субота" [toggleable]="true" [collapsed]="true">
      <p
        class="subjects"
        *ngFor="let subj of schedule.saturdaySubjects; let i = index"
      >
        <span>{{ i + 1 }}</span>
        <p-dropdown
          class="form-control"
          [options]="subjects"
          [(ngModel)]="schedule.saturdaySubjects[i]"
          [optionLabel]="'subjectName'"
          (onChange)="addSubject($event, schedule.saturdaySubjects, i)"
          placeholder="Виберіть предмет"
          [ngModelOptions]="{ standalone: true }"
          [style]="{ width: '190px' }"
        >
        </p-dropdown>
        <button
          pButton
          type="button"
          (click)="delSubject($event, schedule.saturdaySubjects, i)"
        >
          <i class="far fa-trash-alt"></i>
        </button>
      </p>
    </p-fieldset>
  </div>

  <p-footer>
    <button
      pButton
      class="submit-button"
      type="submit"
      pButton
      icon="pi pi-check"
      (click)="submitForm(form)"
      label="Зберегти"
      [disabled]="
        class.invalid ||
        fromDate.invalid ||
        toDate.invalid"
    ></button>
  </p-footer>
</form>
