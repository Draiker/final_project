<div class="container">
  <div class="title">
    <span>
      <h2 class="stat">Статистика <i class="fas fa-chart-line"></i></h2>
    </span>
  </div>

  <div class="menu">
    <p-dropdown
      [options]="years"
      placeholder="Виберіть рік"
      [(ngModel)]="selectedYear"
      (onChange)="onYearChange()"
      [showClear]="true"
    ></p-dropdown>

    <p-multiSelect
      *ngIf="selectedYear && selectedChartsType === 'class'"
      [options]="visibleGroups"
      [(ngModel)]="selectedGroup"
      (onChange)="onClassChange()"
      optionLabel="className"
      [panelStyle]="{ minWidth: '13em' }"
      defaultLabel="Виберіть клас"
    ></p-multiSelect>

    <p-dropdown
      *ngIf="selectedYear && selectedChartsType === 'student'"
      [options]="visibleGroups"
      [(ngModel)]="selectedGroup"
      (onChange)="onClassChange()"
      placeholder="Виберіть клас"
      optionLabel="className"
      [showClear]="true"
    ></p-dropdown>

    <p-dropdown
      *ngIf="selectedGroup"
      [options]="visibleSubjects"
      [(ngModel)]="selectedSubjects"
      (onChange)="onSubjectChange()"
      placeholder="Виберіть предмет"
      [showClear]="true"
    ></p-dropdown>

    <p-dropdown
      *ngIf="selectedGroup && selectedChartsType === 'student'"
      [options]="visibleStudents"
      [(ngModel)]="selectedStudent"
      (onChange)="onStudentChange()"
      placeholder="Виберіть учня"
      [showClear]="true"
    ></p-dropdown>

    <p-calendar
      class="calendar"
      [(ngModel)]="start"
      [locale]="ua"
      placeholder="Початок періоду"
      dateFormat="yy.mm.dd"
      [showIcon]="true"
    ></p-calendar>

    <p-calendar
      class="calendar"
      [(ngModel)]="end"
      [locale]="ua"
      dateFormat="yy.mm.dd"
      placeholder="Кінець періоду"
      [showIcon]="true"
    ></p-calendar>

    <p-radioButton
      label="Школа"
      name="chartGroup"
      value="school"
      [(ngModel)]="selectedChartsType"
    ></p-radioButton>
    <p-radioButton
      label="Клас"
      name="chartGroup"
      value="class"
      [(ngModel)]="selectedChartsType"
    ></p-radioButton>
    <p-radioButton
      label="Учень"
      name="chartGroup"
      value="student"
      [(ngModel)]="selectedChartsType"
    ></p-radioButton>

    <p-button
      class="button"
      icon="pi pi-check"
      [disabled]="isButtonDisabled"
      (onClick)="onClickShow()"
      label="Показати оцінку"
    ></p-button>

    <div class="showMarks">
      <h3 class="averageMark">
        Середня оцінка учня по предмету: {{ average | number: '.1-2' }}
      </h3>
    </div>

    <div class="showMarks">
      <h3 class="averageMark">
        Середня оцінка учня по всіх предметах:
        {{ avgMarkAllSubjects | number: '.1-2' }}
      </h3>
    </div>

    <p-card class="chart">
      <p-chart type="line" height="300px" [data]="data"></p-chart>
    </p-card>
  </div>
</div>
