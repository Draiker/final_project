<div class="container">
  <div class="title">
    <span>
      <h2 class="stat">Статистика <i class="fas fa-chart-line"></i></h2>
    </span>
  </div>

  <div class="menu">
    <p-dropdown [options]="years" placeholder="Виберіть рік" [(ngModel)]="selectedYear" (onChange)="onYearChange()"
      [showClear]="true"></p-dropdown>

    <p-calendar class="calendar" [(ngModel)]="start" [locale]="ua" placeholder="Початок періоду" dateFormat="yy.mm.dd"
      [showIcon]="true"></p-calendar>

    <p-calendar class="calendar" [(ngModel)]="end" [locale]="ua" dateFormat="yy.mm.dd" placeholder="Кінець періоду"
      [showIcon]="true" [defaultDate]="defaultDate"></p-calendar>

    <p-multiSelect *ngIf="selectedYear && selectedChartsType === 'class'" [options]="visibleGroups" [(ngModel)]="selectedGroup"
      (onChange)="onClassChange()" optionLabel="className" [panelStyle]="{ minWidth: '13em' }" defaultLabel="Виберіть клас"></p-multiSelect>

    <p-dropdown *ngIf="selectedYear && selectedChartsType === 'student'" [options]="visibleGroups" [(ngModel)]="selectedGroup"
      (onChange)="onClassChange()" placeholder="Виберіть клас" optionLabel="className" [showClear]="true"></p-dropdown>

    <p-dropdown *ngIf="selectedGroup" [options]="visibleSubjects" [(ngModel)]="selectedSubjects" (onChange)="onSubjectChange()"
      placeholder="Виберіть предмет" [showClear]="true"></p-dropdown>

        <p-multiSelect
          class="student"
          *ngIf="selectedGroup && selectedChartsType === 'student'"
          [options]="visibleStudents"
          [(ngModel)]="selectedStudents"
          (onChange)="onStudentChange($event)"
          [panelStyle]="{ minWidth: '13em' }"
          defaultLabel="Виберіть учня"
          selectedItemsLabel="Вибрано {0} учнів "
        ></p-multiSelect>

        <p-button
          class="showData"
          icon="pi pi-check"
          [disabled]="isButtonDisabled"
          (onClick)="onClickShow()"
          label="Показати оцінки"
        ></p-button>
      </div>
    </p-card>
    <p-card class="chart">
      <h3 class="averageMark">
        Середня оцінка учня по предмету: {{ average | number: '.1-2' }}
      </h3>
    </div>

    <div class="showMarks">
      <h3 class="averageMark">
        Середня оцінка учня по всіх предметах:
        {{ avgMarkAllSubjects | number: '.1-2' }}
      </h3>
      <p-chart
        type="line"
        height="350px"
        [data]="chartMarks"
        [options]="chartOptions"
      ></p-chart>
    </p-card>
  </div>
</div>